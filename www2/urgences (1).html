<!DOCTYPE html>

<html>

<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	<title>Premiers secours</title>

	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
	<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

	<script type="text/javascript">
		var g_data;
		function click_cat(init) {
			// set cats to display
			var cats;
			if (init == "init") {
				cats = g_data;
			}
			else {
				var source = event.srcElement || event.target;
				source = source.innerHTML;
				cats = g_data[source];
			}
			
			// display cats
			$("#categories").text("");
			var c = document.getElementById("categories");
			for (prop in cats) {
				c.innerHTML += '<a onclick="click_cat()" data-role="button">' + prop + '</a><br>';
			}
			$("#categories").trigger("create")
		};
		//window.onload = function() {
		$(document).ready(function() {
			function set_g_data() {
				// $.getJSON("json/urgences2.json", function(data) {
				// 	g_data = data;
				// });
				$.ajax({
					url: "json/urgences2.json",
					async: false,
					dataType: 'json',
					success: function(data) {
						g_data = data;
					}
				});
			};
			set_g_data();
			click_cat("init");
		});
	</script>
</head>

<body>
	<h1> URGENCES </h1>
	<div id="categories">
	</div>
	<a href="index.html">
		<a onclick='click_cat("init")' data-role="button">Retour</a>

	</a>
</body>

</html>